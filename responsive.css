/* ===== RESPONSIVE DESIGN POUR MOBILE ET TABLETTE ===== */

/* Variables CSS pour une meilleure maintenance */
:root {
  --mobile-padding: 10px;
  --tablet-padding: 15px;
  --mobile-font-size: 0.85em;
  --tablet-font-size: 0.9em;
  --mobile-border-radius: 8px;
  --tablet-border-radius: 10px;
}

/* ===== TABLETTE - MODE PORTRAIT (768px - 1024px) ===== */
@media screen and (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
  /* Combat Panel */
  .combat-panel {
    bottom: var(--tablet-padding) !important;
    right: var(--tablet-padding) !important;
    left: var(--tablet-padding) !important;
    width: auto !important;
    max-width: none !important;
    padding: 20px !important;
    border-radius: var(--tablet-border-radius) !important;
    font-size: var(--tablet-font-size) !important;
    max-height: 40vh !important;
    overflow-y: auto !important;
  }

  /* Health Overlay */
  .health-overlay {
    top: var(--tablet-padding) !important;
    gap: 30px !important;
    flex-wrap: wrap !important;
    justify-content: center !important;
  }

  .health-bar-container {
    min-width: 200px !important;
    padding: 12px 18px !important;
  }

  .health-bar {
    width: 180px !important;
    height: 16px !important;
  }

  /* Player Stats */
  #player-stats {
    top: var(--tablet-padding) !important;
    left: var(--tablet-padding) !important;
    padding: 12px !important;
    min-width: 180px !important;
    font-size: 0.9em !important;
  }

  /* Audio Control */
  #audio-control {
    top: var(--tablet-padding) !important;
    right: var(--tablet-padding) !important;
    padding: 8px !important;
  }

  /* Quiz Options */
  .quiz-option {
    padding: 12px 15px !important;
    margin: 8px 0 !important;
    font-size: 1em !important;
  }

  /* Menu Options */
  .menu-option {
    padding: 12px 15px !important;
    margin: 8px 0 !important;
    font-size: 1em !important;
  }
}

/* ===== TABLETTE - MODE PAYSAGE (768px - 1024px) ===== */
@media screen and (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
  /* Combat Panel - Plus compact en paysage */
  .combat-panel {
    bottom: var(--tablet-padding) !important;
    right: var(--tablet-padding) !important;
    width: 45% !important;
    max-width: 450px !important;
    padding: 18px !important;
    border-radius: var(--tablet-border-radius) !important;
    font-size: var(--tablet-font-size) !important;
    max-height: 60vh !important;
    overflow-y: auto !important;
  }

  /* Health Overlay - Reste en haut */
  .health-overlay {
    top: var(--tablet-padding) !important;
    gap: 25px !important;
  }

  .health-bar-container {
    min-width: 160px !important;
    padding: 10px 15px !important;
  }

  .health-bar {
    width: 140px !important;
    height: 14px !important;
  }

  /* Player Stats - Plus compact */
  #player-stats {
    top: var(--tablet-padding) !important;
    left: var(--tablet-padding) !important;
    padding: 10px !important;
    min-width: 160px !important;
    font-size: 0.85em !important;
  }

  /* Audio Control */
  #audio-control {
    top: var(--tablet-padding) !important;
    right: var(--tablet-padding) !important;
    padding: 6px !important;
  }
}

/* ===== MOBILE - MODE PORTRAIT (jusqu'à 767px) ===== */
@media screen and (max-width: 767px) and (orientation: portrait) {
  /* Combat Panel - Pleine largeur en bas */
  .combat-panel {
    bottom: 0 !important;
    right: 0 !important;
    left: 0 !important;
    width: 100% !important;
    max-width: none !important;
    padding: var(--mobile-padding) !important;
    border-radius: 15px 15px 0 0 !important;
    font-size: var(--mobile-font-size) !important;
    max-height: 50vh !important;
    overflow-y: auto !important;
    border-bottom: none !important;
  }

  /* Health Overlay - Adapté pour mobile */
  .health-overlay {
    top: var(--mobile-padding) !important;
    gap: 15px !important;
    flex-direction: column !important;
    align-items: center !important;
  }

  .health-bar-container {
    min-width: 140px !important;
    padding: 8px 12px !important;
  }

  .health-bar-container span {
    font-size: 14px !important;
  }

  .health-bar {
    width: 120px !important;
    height: 12px !important;
  }

  /* Player Stats - Repositionné */
  #player-stats {
    top: auto !important;
    bottom: 60vh !important;
    left: var(--mobile-padding) !important;
    padding: 8px !important;
    min-width: 140px !important;
    font-size: 0.8em !important;
  }

  #player-level {
    font-size: 16px !important;
  }

  /* Audio Control - Plus petit */
  #audio-control {
    top: var(--mobile-padding) !important;
    right: var(--mobile-padding) !important;
    padding: 6px !important;
  }

  #audio-icon {
    font-size: 16px !important;
  }

  /* Quiz et Menu Options - Plus grandes pour le tactile */
  .quiz-option {
    padding: 15px 12px !important;
    margin: 10px 0 !important;
    font-size: 1em !important;
    border-radius: var(--mobile-border-radius) !important;
    min-height: 44px !important; /* Taille minimale recommandée pour le tactile */
    display: flex !important;
    align-items: center !important;
  }

  .menu-option {
    padding: 15px 12px !important;
    margin: 10px 0 !important;
    font-size: 1em !important;
    border-radius: var(--mobile-border-radius) !important;
    min-height: 44px !important;
    display: flex !important;
    align-items: center !important;
  }

  /* Combat Log - Plus compact */
  .combat-log {
    max-height: 80px !important;
    overflow-y: auto !important;
    font-size: 0.85em !important;
  }

  /* Quiz Question - Plus lisible */
  .quiz-question {
    font-size: 1.1em !important;
    line-height: 1.4 !important;
    margin-bottom: 15px !important;
  }

  /* Menu Title */
  .menu-title {
    font-size: 1em !important;
    margin-bottom: 15px !important;
  }
}

/* ===== MOBILE - MODE PAYSAGE (jusqu'à 767px) ===== */
@media screen and (max-width: 767px) and (orientation: landscape) {
  /* Combat Panel - Côté droit en paysage */
  .combat-panel {
    bottom: var(--mobile-padding) !important;
    right: var(--mobile-padding) !important;
    left: auto !important;
    width: 50% !important;
    max-width: 350px !important;
    padding: var(--mobile-padding) !important;
    border-radius: var(--mobile-border-radius) !important;
    font-size: var(--mobile-font-size) !important;
    max-height: 70vh !important;
    overflow-y: auto !important;
  }

  /* Health Overlay - Horizontal en paysage */
  .health-overlay {
    top: var(--mobile-padding) !important;
    gap: 20px !important;
    flex-direction: row !important;
  }

  .health-bar-container {
    min-width: 120px !important;
    padding: 6px 10px !important;
  }

  .health-bar-container span {
    font-size: 12px !important;
  }

  .health-bar {
    width: 100px !important;
    height: 10px !important;
  }

  /* Player Stats - Côté gauche */
  #player-stats {
    top: var(--mobile-padding) !important;
    left: var(--mobile-padding) !important;
    bottom: auto !important;
    padding: 6px !important;
    min-width: 120px !important;
    font-size: 0.75em !important;
  }

  #player-level {
    font-size: 14px !important;
  }

  /* Audio Control */
  #audio-control {
    top: var(--mobile-padding) !important;
    right: var(--mobile-padding) !important;
    padding: 4px !important;
  }

  #audio-icon {
    font-size: 14px !important;
  }

  /* Options plus compactes en paysage */
  .quiz-option, .menu-option {
    padding: 10px 8px !important;
    margin: 6px 0 !important;
    font-size: 0.9em !important;
    min-height: 36px !important;
  }

  /* Combat Log */
  .combat-log {
    max-height: 60px !important;
    font-size: 0.8em !important;
  }

  /* Quiz Question */
  .quiz-question {
    font-size: 1em !important;
    margin-bottom: 10px !important;
  }

  /* Menu Title */
  .menu-title {
    font-size: 0.9em !important;
    margin-bottom: 10px !important;
  }
}

/* ===== TRÈS PETITS ÉCRANS (moins de 480px) ===== */
@media screen and (max-width: 480px) {
  /* Ajustements supplémentaires pour très petits écrans */
  .health-overlay {
    gap: 10px !important;
  }

  .health-bar-container {
    min-width: 100px !important;
    padding: 6px 8px !important;
  }

  .health-bar {
    width: 80px !important;
    height: 8px !important;
  }

  #player-stats {
    min-width: 100px !important;
    padding: 6px !important;
    font-size: 0.7em !important;
  }

  .combat-panel {
    padding: 8px !important;
    font-size: 0.8em !important;
  }

  .quiz-option, .menu-option {
    padding: 12px 8px !important;
    font-size: 0.85em !important;
  }
}

/* ===== AMÉLIORATIONS TACTILES ===== */
@media (hover: none) and (pointer: coarse) {
  /* Améliorer l'expérience tactile */
  .quiz-option, .menu-option {
    min-height: 44px !important;
    touch-action: manipulation !important;
  }

  .quiz-option:active, .menu-option:active {
    transform: scale(0.98) !important;
    transition: transform 0.1s ease !important;
  }

  /* Augmenter la zone de clic pour les petits éléments */
  #audio-control {
    min-width: 44px !important;
    min-height: 44px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
}

/* ===== ANIMATIONS OPTIMISÉES POUR MOBILE ===== */
@media (prefers-reduced-motion: reduce) {
  /* Réduire les animations pour les utilisateurs qui le préfèrent */
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ===== SUPPORT POUR LES ÉCRANS HAUTE DENSITÉ ===== */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  /* Ajustements pour les écrans Retina */
  .health-bar, .quiz-option, .menu-option {
    border-width: 1px !important;
  }
}

/* ===== MODE SOMBRE AUTOMATIQUE ===== */
@media (prefers-color-scheme: dark) {
  /* Le jeu est déjà en mode sombre, mais on peut ajuster si nécessaire */
  .combat-panel {
    background: rgba(0, 0, 0, 0.9) !important;
  }

  .health-bar-container {
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.95), rgba(20, 20, 20, 0.95)) !important;
  }
}

/* ===== ACCESSIBILITÉ ===== */
@media (prefers-contrast: high) {
  /* Améliorer le contraste pour l'accessibilité */
  .combat-panel {
    border-width: 3px !important;
    border-color: #ffffff !important;
  }

  .health-bar-container {
    border-width: 2px !important;
    border-color: #ffffff !important;
  }

  .quiz-option, .menu-option {
    border: 2px solid rgba(255, 255, 255, 0.8) !important;
  }
}